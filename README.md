# Работа с Git


```git config --global user.name “Translogik” ```(Авторизация автора)

```git config --global user.email “vano0402@gmail.com”``` (Авторизация автора)

```git init``` (Создать новый репозиторий в текущей папке)

```git remote add origin https://translogik.github.io/Mamont/``` (Привязка локального репозитория к удаленному, origin - название репозитория)

```git clone git@github.com:Translogik/Mamont.git``` (Загрузка файлов с сервера)

```cd Mamont``` (Перейти в проект)

```cd new/``` (создание и переход в новую папку/проект)

```cd ../``` (Выйти из текущей папки, в более высокую. Сразу можно перейти в другой проект и работать в нём без дополнительных команд)

```git pull --no-ff```(синхронизация локальной текущей ветки с серверной, fetch+merge, --no-ff производить если вначале забыл спулить, хотя не факт что поможет)

```git fetch``` (Позволяет зайти на ветку сервера, без удаления своей ветки при помощи команды git checkout origin/second)

```git merge``` (Слияние веток, например чтобы слить ветку мастера и первую, нужно - перейти в мастер ветку и из неё набрать git merge first)

```git remote -v``` (Просмотр удаленных репозиториев привязанных к локальному, а также опция показывает их url)

```ls``` (Просмотр файлов в ветке)
```git status``` (Текущий статус файлов)
### Ветки
```git branch``` (Просмотр всех веток в репозитории)

```git branch first``` (Создать ветку first)

```git branch -d first``` (Удалить ветку)

```git push --delete origin first```
```git branch -d first``` (Удалить ветку с сервера)

```git checkout first``` (переключение между ветками, также можно на отдельный коммит)

```git push -u origin first``` (Привязка новой ветки к серверу обязательна!)

```git checkout -b second``` (Создание новой ветки и переключение на неё)

```git checkout --track origin/second``` (Копия ветки second с сервера на локал)

```git checkout origin/second``` (Переключение на ветку second, которая находится на сервере, а не свою локальную. Можно посмотреть какие изменения внесли без меня)
### Логи
```git log``` (История операций{коммитов}, выйти q)

```git log first --oneline --graph``` (Просмотр лога коммитов только в ветке first, если удалить это уточнение, то просмотр всех коммитов графами, 
функция --oneline - отображение всех коммитов)

```git log -- index.html``` (Просмотр лога конкретного файла)

```git show a33ea21cf0cb52f9f2fef8b24b6a29fab897ba69```
```git show a33ea``` (Показать более подробную информацию по коммиту, достаточно написать первые несколько символов)

```git show a33ea -- index.html``` (Информация по коммиту в конкретном файле)

```git log -p -- index.html``` (просмотр сразу log+show файла)

```git log --grep 'upd'``` (Поиск коммита по комменту к нему, необязательно писать полный коммент, достаточно часть)

```git log -S '<body>' -p``` (Поиск коммита по части кода, внесённого им)

```git blame -- index.html``` (Показывает все строчки кода в файле и напротив каждой строки автора, который делал последние изменения в ней)
#
```git add .``` {или *}(добавление всех файлов в рабочую область, либо можно по одному git add index.html)

```git add *.js```(добавление всех файлов с расширением джавы)

```git commit -m 'add file txt.lol'``` (Добавить в завершающую область, которая перед отправкой на сервер)

```git commit -a -m 'upd txt.lol'``` (Добавить в завершающую область, только изменённые/удаленные файлы, но не новые. Можно пропускать git add)

```git commit -m 'fixes #1 add'``` (Закрывает issues #1, с добавлением коммента add) 

```git commit --amend -m 'new'``` (Изменение сообщение к последнему коммиту и сам коммит. Т.е. можно добавить файлы ещё в этом же коммите. Работает только до git push)

```git rm --cached txt.lol``` (удаление файлов после коммита, локально файл остается)

```git rm --cached -r lol``` (удаление папок целиком после коммита)
Если удалять после коммита, то после удаления повторить коммит, чтобы изменения не попадали на сервер с этих файлов.

```git revert a3fd5```(отмена коммита a3fd5, создав зеркальный коммит. Работает только до git push)
#
```git push``` (отправка на сервер в ветку)

```pull request``` (Запрос на добавление в мастер ветку, выполняется через сайт)

```merge pull request``` (подтверждение на добавление в мастер ветку)
#
Залить с ветки first в мастер через консольный Git:
```
git checkout master
git merge first
git push
``` 
(2 раза, т.е. в каждой ветке по отдельности, если потребуется)
#
```git tag -a v1.0 -m 'Версия 1.0'``` (Добавление тега с именем v1.0)

```git push --tags``` (Отправка добавленных тегов на сервер)

```git tag -d v1.0``` (Удаление тега, если с сервера, то также как с веткой)

git submodule add <url> Mamont (подмодуль url)



#### По внутренностям:
Ветка - это указатель на коммиты.
  
HEAD - это текущий указатель, который может быть привязан не только к ветке, но и к отдельным коммитам. Выйти из него можно создав ветку в этом отредактированном коммите, либо переключится на существующую ветку.
  
index - это рабочая зона которая находится после add, но до коммита.

--no-ff (fast-forward, если считает что при слиянии проще просто переместить указатель{ветку} на новый коммит, то он так и делает. Поэтому мы эту функцию отключаем.)
Отменять коммиты нельзя. 
  
```git reset``` (Передвигает указатель на предыдущие коммиты)
  
```git reset --hard HEAD~1``` (Передвигает указатель на предыдущий коммит в текущей ветке, без сохранения изменений вообще, т.е. коммит удаляется из истории ветки и изменения в файлах удаляются)
  
```git reset --mixed HEAD~2``` (Этот режим по умолчанию, передвигает на два коммита назад, коммиты удаляются из истории ветки, изменения в файлах сохраняются) тождественен ```git reset head~2```
  
```git reset --soft``` (Сохраняется всё и в файлах и в рабочей зоне, откатывает только с сервера, т.е. сам факт коммита)
  
```git reset --hard ae43r``` (Передвигает на указанный коммит)
#
Алгоритм решения конфликта:
1. Сначала копируем себе файлы с сервера для их редактирования
```
git fetch origin
git checkout -b fix (создание новой ветки)
git merge origin (main,master) 
```
  
Ветки origin/main и origin/master это корневые ветки без вложенной ветки
  
2. Исправленные файлы заливаем на сервер
```
git checkout master
git merge --no-ff fix 
git push
```

Текстовые редакторы, как выйти:
Nano: text Ctrl+x Y Enter.
    Vim: I(или И)  text Esc :wq: Enter
